# steps necessary for CMS setup

1. I add support to `mysqli`:

It is necessary to recompile from source PHP because WordPress require the `mysqli` PHP extension is installed and enabled:

```bash
cd ~/php/php-8.3.1/
./configure --help | grep "mysqli"
mkdir build_session && cd build_session
../configure --prefix=/opt/php/8.3.1 --enable-fpm --enable-bcmath --enable-opcache --enable-ftp --with-openssl --disable-cgi --enable-mbstring --with-curl --with-mysqli --with-pdo-mysql --enable-intl --with-zlib --with-bz2 --enable-gd --with-jpeg --with-gettext --with-gmp --with-xsl --enable-zts --enable-gcov --enable-debug
make
make test
sudo make install
```

I compare the configuration files with the backups made before repeating the compilation to make sure there are no inadvertent changes:

```bash
cd ~/php/backup_config_files/
sudo diff /opt/php/8.3.1/lib/php.ini ./php.ini
sudo diff /opt/php/8.3.1/etc/php-fpm.conf ./php-fpm.conf
sudo diff /opt/php/8.3.1/etc/php-fpm.d/www.conf ./www.conf
```

I check and reload the `php-fpm` service:

```bash
sudo systemctl reload php-fpm
sudo systemctl status php-fpm --no-pager
```

2. I create the database and its administrator user:

Create a user `admin_wp` and `data_wp` database:

User `admin_wp` on `localhost`

```sql
SHOW DATABASES;
SELECT PASSWORD('any_password');
CREATE USER IF NOT EXISTS 'admin_wp'@'localhost' IDENTIFIED BY PASSWORD 'any_hashed_password';
CREATE DATABASE IF NOT EXISTS `data_wp`;
GRANT ALL ON 'data_wp'.* TO 'admin_wp'@'localhost';
FLUSH PRIVILEGES;
SELECT `user`, `password`, `host`, `Super_priv` FROM `mysql`.`user`;
```

User `admin_wp` on `192.168.1.1`

```sql
CREATE USER IF NOT EXISTS 'admin_wp'@'192.168.1.1' IDENTIFIED BY PASSWORD 'any_hashed_password';
GRANT ALL ON 'data_wp'.* TO 'admin_wp'@'192.168.1.1';
FLUSH PRIVILEGES;
SELECT `user`, `password`, `host`, `Super_priv` FROM `mysql`.`user`;
```

User `admin_wp` on `%`

```sql
CREATE USER IF NOT EXISTS 'admin_wp'@'%' IDENTIFIED BY PASSWORD 'any_hashed_password';
GRANT ALL ON 'data_wp'.* TO 'admin_wp'@'%';
FLUSH PRIVILEGES;
SELECT `user`, `password`, `host`, `Super_priv` FROM `mysql`.`user`;
```

I delete the definition of a user that is superfluous:

```sql
DROP USER 'admin_wp'@'%';
```

3. I download the compressed archive of `CMS` and start the setup:

```bash
mkdir ~/wordpress && cd ~/wordpress
wget https://wordpress.org/latest.zip
unzip latest.zip
mv wordpress/ /var/www/html/
cd /var/www/html/
chown --recursive developer_username:www-data .
```

Now I need to point the browser to the following address:

<https://192.168.1.XXX/wordpress/readme.html>

and I follow the instructions.

4. I install the CMS and complete the setup:

Before starting I need to write down some data to enter during the guided installation:

* database name: `data_wp`
* database username: `admin_wp`
* database password: `any_password`
* database host: `127.0.0.1`

To make the system work I had to copy the content generated by the installation procedure into the wp-config.php file created in the root of the project.

To proceed with the first login I needed to note down the following values in advance:

* title: `hologram-wp`
* username: `editor_wp`
* password: `any_other_password`
* fictitious email: `webmaster@hologram-wp.local`
